<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ch√° Cozinha Mayssa</title>
    <link href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@300;400;600;700&family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Roboto:wght@300;400;500&display=swap" rel="stylesheet">
    
    <style>
        /* --- TEMA MARROM TERRA / CHOCOLATE --- */
        :root { 
            --cor-principal: #6d4c41;     
            --cor-fundo: #faf7f2;         
            --cor-texto: #4a4a4a;         
            --cor-destaque: #a1887f;      
            --cor-botao-verde: #27ae60;
            --cor-borda: #d7ccc8;
        }

        html { scroll-behavior: smooth; } /* Rolagem suave no celular */

        body {
            font-family: 'Roboto', sans-serif;
            background-color: var(--cor-fundo);
            color: var(--cor-texto);
            margin: 0;
            padding: 0;
            line-height: 1.6;
            -webkit-font-smoothing: antialiased; /* Deixa a fonte mais n√≠tida no iPhone */
        }

        /* --- CABE√áALHO --- */
        header {
            background-color: var(--cor-principal);
            color: white;
            text-align: center;
            padding: 60px 20px 90px; /* Ajustado para mobile */
            background-image: 
                linear-gradient(to bottom, rgba(109, 76, 65, 0.9), rgba(109, 76, 65, 0.75)), 
                url('biblia.jpeg'), url('biblia.jpg'), url('biblia.png'), url('biblia.webp');
            background-size: cover; 
            background-position: center;
            position: relative;
            z-index: 1;
        }

        /* Esconde elementos na impress√£o */
        @media print { 
            header, .btn-voltar, .submit-btn, .nav-btn, h2, .versiculo-final, .warning-box, .welcome-text, .countdown-box, .event-info { display: none !important; } 
            body { background: white; } 
            .container { box-shadow: none; border: none; margin: 0; padding: 0; min-height: auto; } 
            #thank-you-card { border: 2px solid #000; break-inside: avoid; } 
        }

        h1 {
            font-family: 'Playfair Display', serif;
            font-size: 2.8em; /* Tamanho equilibrado */
            margin: 0;
            font-weight: 700;
            letter-spacing: 1px;
            text-shadow: 2px 2px 15px rgba(0,0,0,0.9);
            line-height: 1.1;
        }

        .welcome-text {
            font-size: 1.1em;
            max-width: 800px;
            margin: 15px auto;
            font-weight: 400;
            text-shadow: 1px 1px 8px rgba(0,0,0,0.9); 
            line-height: 1.5;
            padding: 0 10px;
        }

        /* --- BLOCOS DE INFORMA√á√ÉO (DATA E CONTAGEM) --- */
        .event-info {
            margin: 20px auto; 
            padding: 15px; 
            border-top: 1px solid rgba(255,255,255,0.3); 
            border-bottom: 1px solid rgba(255,255,255,0.3); 
            max-width: 90%;
            background: rgba(0,0,0,0.15);
            border-radius: 12px;
            backdrop-filter: blur(2px); /* Efeito moderno de vidro */
        }
        .event-info p { margin: 5px 0; font-size: 1.1em; text-shadow: 1px 1px 5px rgba(0,0,0,0.9); }

        .countdown-box {
            background: rgba(255, 255, 255, 0.2);
            padding: 8px 20px;
            border-radius: 50px;
            display: inline-block;
            margin-top: 15px;
            font-weight: bold;
            font-family: 'Comfortaa';
            font-size: 1em;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.8);
            border: 1px solid rgba(255,255,255,0.3);
        }

        .versiculo {
            font-family: 'Playfair Display', serif;
            font-style: italic;
            font-size: 1em;
            background: rgba(255,255,255,0.15);
            padding: 15px;
            border-radius: 15px;
            margin-top: 25px;
            display: inline-block;
            border: 1px solid rgba(255,255,255,0.3);
            text-shadow: 1px 1px 5px rgba(0,0,0,0.8);
            max-width: 90%;
        }

        .couple-photo-container {
            margin-top: 30px;
            text-align: center;
            position: relative; 
            z-index: 2; 
        }

       .couple-photo {
            max-width: 100%; /* A imagem pode ocupar at√© 100% da largura do container */
            height: auto; /* A altura se ajusta automaticamente para n√£o distorcer */
            border-radius: 20px; /* Mant√©m as bordas arredondadas, mas seguindo o formato da foto */
            box-shadow: 0 15px 30px rgba(0,0,0,0.5);
            border: 4px solid rgba(255,255,255,0.95);
            display: block; /* Garante que a imagem se comporte como um bloco */
            margin: 0 auto; /* Centraliza a imagem horizontalmente */
        }

        /* --- CONTAINER PRINCIPAL --- */
        .container {
            max-width: 800px;
            margin: -40px 15px 40px; /* Margens laterais seguras para celular */
            background: white;
            padding: 30px 20px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.08);
            position: relative;
            z-index: 10;
            min-height: 400px;
        }

        h2 { font-family: 'Comfortaa', cursive; color: var(--cor-principal); font-weight: 700; font-size: 1.4em; }
        
        .categoria-titulo {
            font-family: 'Playfair Display', serif;
            color: var(--cor-principal);
            font-size: 1.5em;
            margin-top: 35px;
            margin-bottom: 15px;
            border-bottom: 2px solid #eee;
            padding-bottom: 5px;
        }

        /* INPUT OTIMIZADO PARA MOBILE (Evita zoom autom√°tico) */
        input[type="text"] {
            font-family: 'Roboto', sans-serif;
            width: 100%;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            font-size: 16px; /* Importante: 16px evita zoom no iOS */
            box-sizing: border-box; 
            margin-bottom: 20px;
            -webkit-appearance: none;
        }
        input[type="text"]:focus { outline: none; border-color: var(--cor-principal); background: #fffdfc; }

        /* BOT√ïES TOQUE F√ÅCIL */
        .nav-btn {
            font-family: 'Comfortaa', cursive;
            display: block;
            width: 100%;
            padding: 18px;
            margin: 12px 0;
            background: white;
            border: 2px solid var(--cor-principal);
            color: var(--cor-principal);
            font-size: 1.05em;
            border-radius: 50px;
            cursor: pointer;
            transition: 0.2s;
            font-weight: bold;
            -webkit-tap-highlight-color: transparent; /* Remove flash azul no toque */
        }
        .nav-btn:active { transform: scale(0.98); background: #fcece6; } /* Feedback visual ao tocar */

        .btn-voltar {
            background: transparent;
            border: 2px solid var(--cor-principal);
            color: var(--cor-principal);
            padding: 8px 20px;
            border-radius: 20px;
            cursor: pointer;
            font-family: 'Comfortaa';
            font-size: 0.9em;
            display: inline-flex;
            align-items: center;
            margin-bottom: 20px;
            font-weight: bold;
            -webkit-tap-highlight-color: transparent;
        }

        /* GRADE DE PRESENTES MOBILE */
        .gift-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(145px, 1fr)); /* Garante 2 colunas em telas pequenas */
            gap: 10px;
        }

        .gift-item {
            font-family: 'Roboto', sans-serif;
            padding: 15px 5px;
            border: 1px solid #e0e0e0;
            border-radius: 12px;
            text-align: center;
            cursor: pointer;
            background-color: white;
            font-size: 0.95em;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 50px; /* Altura m√≠nima para toque f√°cil */
            line-height: 1.2;
            -webkit-tap-highlight-color: transparent;
        }
        .gift-item.selected { 
            background-color: var(--cor-principal); 
            color: white; 
            border-color: var(--cor-principal);
            font-weight: bold;
            box-shadow: 0 4px 10px rgba(109, 76, 65, 0.25);
            transform: scale(1.02);
        }
        .gift-item.taken { 
            background-color: #f2f2f2; 
            color: #bbb; 
            pointer-events: none; 
            border-color: #f2f2f2;
            text-decoration: line-through;
        }

        .submit-btn {
            font-family: 'Comfortaa', cursive;
            background-color: var(--cor-botao-verde);
            color: white;
            border: none;
            padding: 18px;
            font-size: 1.2em;
            border-radius: 50px;
            cursor: pointer;
            margin-top: 30px;
            width: 100%;
            font-weight: bold;
            box-shadow: 0 4px 15px rgba(39, 174, 96, 0.3);
        }
        .submit-btn:active { transform: scale(0.98); }

        .hidden { display: none; }
        
        .warning-box {
            background: #fff8e1;
            color: #795548;
            border-left: 5px solid #ffc107;
            padding: 12px; 
            border-radius: 8px; 
            font-size: 0.9em;
            margin-bottom: 20px;
            line-height: 1.4;
        }
        
        .pix-box {
            background: #fbf5f3; 
            padding: 20px; 
            border-radius: 15px; 
            border: 2px dashed var(--cor-principal); 
            margin: 25px 0; 
            text-align: center;
            word-wrap: break-word; /* Evita que a chave PIX quebre o layout */
        }

        /* ESTILOS DA TELA FINAL */
        .thank-you-header { animation: fadeIn 0.8s ease-out; margin-bottom: 20px; }
        .thank-you-icon { font-size: 3.5em; display: block; margin-bottom: 5px; animation: bounce 2s infinite; }
        .thank-you-title { font-family: 'Playfair Display', serif; color: var(--cor-botao-verde); font-size: 2.2em; margin: 0; line-height: 1.1; }
        
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {transform: translateY(0);}
            40% {transform: translateY(-15px);}
            60% {transform: translateY(-7px);}
        }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        .reminder-card {
            background-color: #fffaf0;
            border: 2px dashed var(--cor-principal);
            padding: 20px;
            border-radius: 15px;
            margin: 20px auto;
            max-width: 100%; /* Ajuste mobile */
            position: relative;
        }
        .reminder-title { font-family: 'Playfair Display', serif; color: var(--cor-principal); font-size: 1.3em; margin-bottom: 10px; text-transform: uppercase; letter-spacing: 1px; }
        .reminder-info { font-size: 1em; margin: 8px 0; color: #555; }
        .reminder-value { font-weight: bold; color: var(--cor-principal); font-size: 1.2em; }
        .reminder-footer { margin-top: 15px; font-size: 0.8em; color: #999; border-top: 1px solid #ddd; padding-top: 10px; }

    </style>
</head>
<body>

<header>
    <h1>Ch√° de Cozinha Mayssa</h1>
    <div class="welcome-text">
        Sejam muito bem-vindos ao come√ßo do nosso sonho! <br><br>
        Estamos preparando cada detalhe do nosso novo lar com muito amor. <br>
        <strong>Obrigado por fazerem parte da nossa hist√≥ria!</strong>
    </div>

    <div class="event-info">
        <p> <strong>Data:</strong> 25 de Janeiro de 2026 √†s 13:00h</p>
        <p> <strong>Local:</strong> Rua Imirim, 75 - Jandira</p>
    </div>

    <div class="countdown-box">
        ‚è≥ Faltam <span id="contador">0</span> dias!
    </div>

    <div class="couple-photo-container">
        <img src="casal.jpg" onerror="this.src='casal.jpeg'" alt="Foto do Casal Mayssa" class="couple-photo">
    </div>
    
    <div class="versiculo">
        "Se dois de v√≥s concordarem na terra acerca de qualquer coisa que pedirem, isso lhes ser√° feito por meu Pai..." <br>
        <small style="font-family: 'Roboto', sans-serif; font-style: normal; margin-top:5px; display:block;">- Mateus 18:19</small>
    </div>
</header>

<div class="container">

    <div id="section-1">
        <h2>Como voc√™s gostariam de nos aben√ßoar?</h2>
        <p>Antes de escolher, por favor, digite seu nome:</p>
        <input type="text" id="guestName" placeholder="Seu Nome..." required>
        
        <p style="margin-top: 25px;">Selecione uma op√ß√£o abaixo:</p>
        <button class="nav-btn" onclick="goToSection(2)">üéÅ Escolher um Presente da Lista</button>
        <button class="nav-btn" onclick="goToSection(3)">‚ú® Enviar um Pix ou Presente Surpresa</button>
    </div>

    <div id="section-2" class="hidden">
        <button class="btn-voltar" onclick="goToSection(1)">‚¨Ö Voltar</button>
        <h2>Escolha do Item</h2>
        <p><strong>Descri√ß√£o:</strong> Toque no item que deseja dar de presente.</p>
        
        <div class="warning-box">
            ‚ö†Ô∏è Selecione um item e clique em "Enviar Escolha". O item sair√° da lista automaticamente.
        </div>

        <div id="giftListContainer">Carregando lista...</div>

        <button class="submit-btn" onclick="finalizarEnvio('Lista')">Enviar Escolha</button>
    </div>

    <div id="section-3" class="hidden">
        <button class="btn-voltar" onclick="goToSection(1)">‚¨Ö Voltar</button>
        <h2>Outras Formas ‚ù§Ô∏è</h2>
        <p>Se preferir a praticidade, criamos este espa√ßo.</p>
        
        <div class="pix-box">
            <h3 style="margin-top:0;">Chave Pix Aben√ßoada:</h3>
            <p style="font-size: 1.4em; font-weight: bold; color: var(--cor-principal); font-family: 'Roboto', sans-serif; margin: 10px 0;">1198739-3992</p>
            <p style="font-weight: bold; margin: 5px 0;">Mayssa Martha Francisco da Silva</p>
            <p style="color: #666; font-size: 0.9em;"><small>(Confirme os dados antes de enviar)</small></p>
        </div>

        <p>Qual item voc√™ escolhe para aben√ßoar o nosso novo lar? (Opcional):</p>
        <input type="text" id="customGift" placeholder="Ex: Vou levar um presente surpresa...">

        <button class="submit-btn" onclick="finalizarEnvio('Pix/Outro')">Confirmar</button>
    </div>

    <div id="thank-you-screen" class="hidden" style="text-align: center; padding: 10px;">
        
        <div class="thank-you-header">
            <span class="thank-you-icon">üôå</span>
            <h2 class="thank-you-title">Gl√≥ria a Deus!</h2>
        </div>
        
        <div style="margin: 20px auto; padding: 15px; background: #fff; border-radius: 15px; max-width: 600px; border: 1px solid #eee;">
            <p style="font-size: 1.05em; line-height: 1.6; color: #555;">
                N√£o tenho palavras para agradecer... ‚ù§Ô∏è <br><br>
                Ver o seu carinho com a gente nos faz sentir o quanto somos amados. Que Deus multiplique infinitamente na sua vida! <br>
                <strong>Obrigada por tanto!</strong>
            </p>
        </div>

        <div id="thank-you-card" class="reminder-card">
            <div class="reminder-title">Lembrete do Presente</div>
            <div style="border-bottom: 1px solid #eee; margin-bottom: 15px;"></div>
            
            <p class="reminder-info">Convidado(a):</p>
            <p class="reminder-value" id="card-name">Nome</p>
            
            <p class="reminder-info" style="margin-top:15px;">Item Escolhido:</p>
            <p class="reminder-value" id="card-item" style="color: #27ae60;">Item</p>
            
            <div class="reminder-footer">Ch√° da Mayssa ‚Ä¢ Deus Aben√ßoe!</div>
        </div>

        <p style="color: #999; font-size: 0.9em; margin-top: 15px;">üì∏ <em>Tire um print da tela para guardar!</em></p>
        
        <button class="nav-btn" onclick="window.print()" style="width: auto; display: inline-block; padding: 10px 25px; margin-top: 10px; font-size: 0.9em;">
            üñ®Ô∏è Imprimir
        </button>
        
        <br><br>
        <div class="versiculo-final" style="color: #888; background: #f5f5f5; border-radius: 10px; padding: 10px 20px; display: inline-block; font-size: 0.9em;">
            "Deus te aben√ßoe grandemente!"
        </div>
    </div>

</div>

<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
    import { getFirestore, collection, addDoc, onSnapshot, query, where } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";

    // --- SUAS CHAVES DO FIREBASE ---
    const firebaseConfig = {
      apiKey: "AIzaSyB3JVacaEdp0xjHjd8faxmqPu3vJX9TS8M",
      authDomain: "cha-cozinha-mayssa.firebaseapp.com",
      projectId: "cha-cozinha-mayssa",
      storageBucket: "cha-cozinha-mayssa.firebasestorage.app",
      messagingSenderId: "574353624372",
      appId: "1:574353624372:web:6bfaf5851fb07b0811e961",
      measurementId: "G-95HZS9ZX4L"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    // --- CONTAGEM REGRESSIVA ---
    function iniciarContagem() {
        const dataCha = new Date(2026, 0, 25); // 25 Jan 2026
        const hoje = new Date();
        const diferenca = dataCha - hoje;
        const dias = Math.ceil(diferenca / (1000 * 60 * 60 * 24));
        const elemento = document.getElementById("contador");
        if(elemento) {
            elemento.innerText = dias > 0 ? dias : 0;
        }
    }
    iniciarContagem();

    // --- LISTA DE PRESENTES ---
    const categorias = {
        "Eletrodom√©sticos": ["Liquidificador", "Ferro de Passar", "Sanduicheira", "Ventilador", "Cafeteira"],
        "Utens√≠lios de Cozinha": ["Jogo de Panelas", "Panela de Press√£o", "Frigideira", "Cuscuzeira", "Faqueiro (Dia a dia)", "Kit de Conchas (Silicone)", "Jogo de X√≠caras", "Jogo de Copos", "Garrafa T√©rmica", "Assadeira (Tabuleiro)", "Forma de Bolo", "Forma de P√£o", "T√°bua de Corte", "Ralador", "Potes Pl√°sticos", "Fruteira", "Escorredor de Lou√ßa", "Abridor de Latas", "Espremedor de Alho", "Espremedor de Lim√£o", "Peneira", "Fouet (Batedor)", "Descascador de Legumes", "Concha de Sorvete", "Forminhas de Gelo", "Saladeira", "A√ßucareiro e Saleiro"],
        "Cama, Mesa e Banho": ["Jogo de Cama", "Coberta", "Edredom", "Jogo de Toalhas", "Kit Pia Banheiro", "Tapete Antiderrapante (Box)"],
        "Limpeza e Organiza√ß√£o": ["Kit Panos de Prato", "Panos de Ch√£o", "Lixeira de Pia", "Lixeira de Banheiro", "Vassoura e P√°", "Rodo e Balde", "Cesto de Roupa", "Pregadores", "Tapete de Entrada", "Cabides"]
    };

    let itemSelecionado = null;
    let itensJaComprados = [];

    // ATUALIZA√á√ÉO EM TEMPO REAL
    const q = query(collection(db, "presentes_escolhidos"));
    onSnapshot(q, (snapshot) => {
        itensJaComprados = [];
        snapshot.forEach((doc) => {
            itensJaComprados.push(doc.data().item);
        });
        renderizarLista(); 
    });

    function renderizarLista() {
        const containerLista = document.getElementById('giftListContainer');
        containerLista.innerHTML = "";

        for (const [nomeCategoria, itens] of Object.entries(categorias)) {
            const titulo = document.createElement('h3');
            titulo.className = 'categoria-titulo';
            titulo.innerText = nomeCategoria;
            containerLista.appendChild(titulo);

            const grid = document.createElement('div');
            grid.className = 'gift-grid';

            itens.forEach(item => {
                const div = document.createElement('div');
                div.className = 'gift-item';
                div.innerText = item;

                if (itensJaComprados.includes(item)) {
                    div.classList.add('taken');
                    div.title = "J√° escolhido por outro convidado";
                } else {
                    div.onclick = () => selecionar(div, item);
                }
                
                if (item === itemSelecionado) {
                    div.classList.add('selected');
                }

                grid.appendChild(div);
            });
            containerLista.appendChild(grid);
        }
    }

    // FUN√á√ïES DE A√á√ÉO
    window.selecionar = function(elemento, nome) {
        document.querySelectorAll('.gift-item').forEach(e => e.classList.remove('selected'));
        elemento.classList.add('selected');
        itemSelecionado = nome;
    }

    window.goToSection = function(num) {
        const nome = document.getElementById('guestName').value;
        if (num > 1 && nome.trim() === "") {
            alert("Por favor, digite seu nome primeiro! ‚ù§Ô∏è");
            return;
        }
        document.getElementById('section-1').classList.add('hidden');
        document.getElementById('section-2').classList.add('hidden');
        document.getElementById('section-3').classList.add('hidden');
        document.getElementById('section-' + num).classList.remove('hidden');
        window.scrollTo(0, 0);
    }

    window.finalizarEnvio = async function(tipo) {
        const nomeConvidado = document.getElementById('guestName').value;
        let presenteFinal = itemSelecionado;

        if (tipo === 'Lista') {
            if (!itemSelecionado) {
                alert("Por favor, selecione um item para aben√ßoar o lar! üôè");
                return;
            }
            try {
                await addDoc(collection(db, "presentes_escolhidos"), {
                    item: itemSelecionado,
                    quem: nomeConvidado,
                    data: new Date()
                });
            } catch (e) {
                console.error("Erro ao salvar: ", e);
                alert("Houve um erro ao salvar. Tente novamente.");
                return;
            }
        } 
        else if (tipo === 'Pix/Outro') {
            const textoPersonalizado = document.getElementById('customGift').value;
            presenteFinal = textoPersonalizado.trim() !== "" ? textoPersonalizado : "Contribui√ß√£o via Pix / Surpresa";
            try {
                await addDoc(collection(db, "pix_confirmados"), {
                    descricao: presenteFinal,
                    quem: nomeConvidado,
                    data: new Date()
                });
            } catch (e) {}
        }

        document.getElementById('card-name').innerText = nomeConvidado;
        document.getElementById('card-item').innerText = presenteFinal;

        document.getElementById('section-2').classList.add('hidden');
        document.getElementById('section-3').classList.add('hidden');
        document.getElementById('thank-you-screen').classList.remove('hidden');
        
        window.scrollTo(0, 0);
    }
</script>

</body>

</html>





